---
title: Loading í˜ì´ì§€ ì™„ì„±í•˜ê¸°
sidebar_label: Loading í˜ì´ì§€ ì™„ì„±í•˜ê¸°
id: doc6
---

![./doc6_assets/Kapture_2021-03-22_at_17.23.06.gif](./doc6_assets/Kapture_2021-03-22_at_17.23.06.gif)

ì´ì œëŠ” useEffectë„ ë°°ì› ìœ¼ë‹ˆ, Loading í˜ì´ì§€ë¥¼ ì™„ì„±í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ë§¤ì´ˆë§ˆë‹¤ ì œëª© ë³€ê²½í•˜ê¸°

0.7ì´ˆë§ˆë‹¤ ê²°ê³¼ ë¶„ì„ì¤‘ ì œëª©ì— .ì´ ì°íˆëŠ” íš¨ê³¼ë¶€í„° ì¶”ê°€í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```jsx
// pages/Loading/index.js
...
import { useEffect, useState } from "react";
...

const Loading = () => {
	const [title, setTitle] = useState("ê²°ê³¼ ë¶„ì„ì¤‘");

	useEffect(() => {
		setTimeout(() => {
			setTitle((title) => title + ".");
		}, 700);
	}, [title]);

	return (
		<Container>
			<Title>{title}</Title>
			<Spinner></Spinner>
		</Container>
	);
};

export default Loading;
```

**ë³€ê²½ëœ ì½”ë“œ ì„¤ëª…**

- `useState`ë¡œ `title` ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
- `useEffect` í•¨ìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ ì£¼ì—ˆìŠµë‹ˆë‹¤.
  - `useEffect` í•¨ìˆ˜ì˜ ì˜ì¡´ì„± ë°°ì—´ì— `title`ì„ ë„£ì–´, ìµœì´ˆ ë Œë”ë§ê³¼ `title`ì´ ë³€ê²½ë  ë•Œë§Œ `useEffect`ê°€ ì‹¤í–‰ë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
  - `useEffect` í•¨ìˆ˜ ì•ˆì—ëŠ” `setTimeout` í•¨ìˆ˜ê°€ ìˆìœ¼ë©°, ë Œë”ë§ì´ ëë‚œ í›„ 0.7ì´ˆ í›„ì— `setTitle` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì œëª©ì— . ë¥¼ ì¶”ê°€í•˜ì—¬ ì¤ë‹ˆë‹¤.
- ë Œë”ë§ ì‹œì— ì—˜ë¦¬ë¨¼íŠ¸ì—ì„œ ë³€ê²½ëœ `title`ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ `{title}`ë¡œ ë³€ê²½í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.

ì½”ë“œë¥¼ ë‹¤ ìˆ˜ì •í–ˆìœ¼ë‹ˆ, ì‹¤í–‰í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

![./doc6_assets/Kapture_2021-03-23_at_00.28.19.gif](./doc6_assets/Kapture_2021-03-23_at_00.28.19.gif)

ì •ìƒì ìœ¼ë¡œ ì˜ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤!!

## ì •í•´ì§„ ì‹œê°„ì´ ì§€ë‚˜ë©´ í˜ì´ì§€ ì´ë™ ì‹œí‚¤ê¸°

ì´ì œ `useEffect`ì™€ `setTimeout`ì„ ì‚¬ìš©í•´ ë´¤ìœ¼ë‹ˆ, í˜ì´ì§€ ì´ë™ì„ ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ê°ì´ ì¡íˆì‹œë‚˜ìš”?

ì´ ë²ˆì—ëŠ” 2ì´ˆ í›„ì— ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
// pages/Loading/index.js
...
import { useHistory } from "react-router";
...

const Loading = () => {
	...
	let history = useHistory();
	...

	...
	useEffect(() => {
		setTimeout(() => history.push("/result"), 2000);
	}, [history]);
	...

};

```

**ë³€ê²½ëœ ì½”ë“œ ì„¤ëª…**

- í˜ì´ì§€ ë³€ê²½ì„ í•˜ê¸° ìœ„í•´ `react-router`ì—ì„œ `useHistory`ë¥¼ `import` í•˜ì˜€ìŠµë‹ˆë‹¤.
- useHistory hooksë¥¼ í™œìš©í•˜ì—¬ history ê°ì²´ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤.
- useEffect í•¨ìˆ˜ë¥¼ ì¶”ê°€í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.
  - `useEffect` í•¨ìˆ˜ì˜ ì˜ì¡´ì„± ë°°ì—´ì— `history`ë¥¼ ë„£ì–´, ìµœì´ˆ ë Œë”ë§ê³¼ `history`ê°€ ë³€ê²½ë  ë•Œë§Œ `useEffect`ê°€ ì‹¤í–‰ë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
  - `useEffect` í•¨ìˆ˜ ì•ˆì—ëŠ” `setTimeout` í•¨ìˆ˜ê°€ ìˆìœ¼ë©°, ë Œë”ë§ì´ ëë‚œ í›„ 2ì´ˆ í›„ì— `history.push` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ `/result` í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.

ì½”ë“œë¥¼ ë³€ê²½í•˜ì˜€ìœ¼ë‹ˆ, ë‹¤ì‹œ ì‹¤í–‰í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

![./doc6_assets/Kapture_2021-03-22_at_17.23.06.gif](./doc6_assets/Kapture_2021-03-22_at_17.23.06.gif)

ì •ìƒì ìœ¼ë¡œ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤!! ğŸ‘ğŸ‘ğŸ‘ğŸ‘

## ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ, timerê°€ ì‚´ì•„ ìˆëŠ” ë¬¸ì œ

ê·¸ëŸ°ë° ë¬¸ì œê°€ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤.

ê°œë°œì ë„êµ¬ë¥¼ ì—´ì–´ë³´ë‹ˆ, ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

![./doc6_assets/Screen_Shot_2021-03-23_at_12.51.28_AM.png](./doc6_assets/Screen_Shot_2021-03-23_at_12.51.28_AM.png)

í•´ì„ì„ í•´ë³´ë©´ ì–¸ë§ˆìš´íŠ¸ ëœ ì»´í¬ë„ŒíŠ¸ì—ëŠ” `state` ì—…ë°ì´íŠ¸ê°€ ë¶ˆê°€ëŠ¥ í•˜ë©°, ì´ëŠ” ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ìƒìœ¼í‚¬ ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤. ì´ ê²ƒì´ ì–´ë–¤ ë‚´ìš©ì¸ì§€ ìì„¸íˆ ì•Œì•„ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```jsx
// pages/Loading/index.js
...
useEffect(() => {
		setTimeout(() => {
			setTitle((title) => title + ".");
		}, 700);
	}, [title]);

useEffect(() => {
	setTimeout(() => history.push("/result"), 2000);
}, [history]);

...
```

ìœ„ ì½”ë“œê°€ ì‘ë™í•˜ëŠ” ìˆœì„œë¥¼ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

- ìµœì´ˆ ë Œë”ë§ì´ ì§„í–‰ ë©ë‹ˆë‹¤.
  - `useEffect` ì‹¤í–‰ë˜ê³ , 0.7ì´ˆ í›„ì— `setTitle` í•¨ìˆ˜ë¥¼ í†µí•´ `title`ì´ ì—…ë°ì´íŠ¸ê°€ ë˜ëŠ” ê²ƒì„ ì˜ˆì•½í•©ë‹ˆë‹¤.
  - `useEffect` ì‹¤í–‰ë˜ê³ , 2ì´ˆ í›„ì— `history.push` í•¨ìˆ˜ë¥¼ í†µí•´ í˜ì´ì§€ ì´ë™ ë˜ëŠ” ê²ƒì„ ì˜ˆì•½í•©ë‹ˆë‹¤.
- 0.7ì´ˆê°€ ì§€ë‚˜, `setTitle` í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©° `title` ê°’ì´ ë³€ê²½ë©ë‹ˆë‹¤.
- `title` ê°’ì´ ë³€ê²½ë˜ì—ˆìœ¼ë¯€ë¡œ, `title`ì„ ì˜ì¡´ì„± ë°°ì—´ë¡œ ê°–ê³  ìˆëŠ” `useEffect`ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
  - 0.7ì´ˆ í›„ì— `setTitle` í•¨ìˆ˜ë¥¼ í†µí•´ `title`ì´ ì—…ë°ì´íŠ¸ê°€ ë˜ëŠ” ê²ƒì„ ì˜ˆì•½í•©ë‹ˆë‹¤.
- 2ì´ˆê°€ ì§€ë‚˜, `history.push` í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©° í˜ì´ì§€ê°€ ì´ë™ë©ë‹ˆë‹¤.
  - `Loading` ì»´í¬ë„ŒíŠ¸ëŠ” ì–¸ë§ˆìš´íŠ¸(í™”ë©´ì—ì„œ ì—†ì–´ì§) ë©ë‹ˆë‹¤.
- 0.7ì´ˆê°€ ì§€ë‚˜, `setTitle` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
  - `Loading` ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ ë˜ì–´ ì—…ë°ì´íŠ¸í•  `state`ê°€ ì—†ì–´ì ¸ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

ì´í•´ê°€ ë˜ì…¨ë‚˜ìš”?

ê²°ë¡ ë§Œ ìš”ì•½í•˜ë©´ ê²°êµ­ ì»´í¬ë„ŒíŠ¸ê°€ ì—†ì–´ì¡ŒëŠ”ë° `timer`ê°€ ë‚¨ì•„ìˆê¸° ë•Œë¬¸ì— ìƒê¸°ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.

ì´ëŸ´ ë•ŒëŠ” `useEffect`ì˜ `cleanup` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## useEffect cleanup í•¨ìˆ˜ ì‚¬ìš©í•˜ê¸°

```jsx
useEffect(() => {
	// ì˜ì¡´ì„± ë°°ì—´ì— ë”°ë¼ ì‹¤í–‰ë  ì½”ë“œë“¤
	something();

	return () => {
		// ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì‹¤í–‰ë  ì½”ë“œ
		something2();
}

}, [ì˜ì¡´ì„± ë°°ì—´, ....])
```

ë‹¤ì‹œ `useEffect` í•¨ìˆ˜ì˜ êµ¬ì¡°ë¥¼ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ì´ ì „ íŒŒíŠ¸ì—ì„œ ë°°ìš°ì§€ ì•Šì€ ë¶€ë¶„ì´ ìˆëŠ”ë° ê·¸ ê²ƒì€ `useEffect` í•¨ìˆ˜ê°€ `return` í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ë¥¼ `useEffect`ì—ì„œëŠ” `cleanup` í•¨ìˆ˜ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

`cleanup` í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ(ì–¸ë§ˆìš´íŠ¸)ë  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì´ ê³³ì—ì„œëŠ” ì£¼ë¡œ ì„œë²„ì™€ì˜ ì»¤ë„¥ì…˜ì„ ëŠëŠ”ë‹¤ê±°ë‚˜, íƒ€ì´ë¨¸ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ì½”ë“œë“¤ì´ ì£¼ë¡œ ë“¤ì–´ ê°‘ë‹ˆë‹¤.

ì´ì œ `cleanup` í•¨ìˆ˜ë¥¼ ë°°ì› ìœ¼ë‹ˆ, ì‹¤ì œ ì‚¬ìš©í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```jsx
// pages/Loading/index.js
...
useEffect(() => {
		const id = setTimeout(() => {
			setTitle((title) => title + ".");
		}, 700);
		return () => clearTimeout(id);
}, [title]);
...
```

**ë³€ê²½ëœ ì½”ë“œ ì„¤ëª…**

- `setTimeout` í•¨ìˆ˜ëŠ” ì‹¤í–‰ë˜ë©´ ê²°ê³¼ ê°’ìœ¼ë¡œ `id`ë¥¼ `return` í•©ë‹ˆë‹¤. í•´ë‹¹ `id`ë¥¼ `id` ë³€ìˆ˜ì— ë‹´ì•˜ìŠµë‹ˆë‹¤.
- `useEffect` `cleanup` í•¨ìˆ˜ì—ì„œ `clearTimeout`ì— idë¥¼ ë„£ì–´ í˜¸ì¶œí•˜ì˜€ìŠµë‹ˆë‹¤.
  - `clearTimeout`ì€ ì˜ˆì•½ë˜ì–´ ìˆë˜ ì‘ì—…ì„ ì·¨ì†Œí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

ì½”ë“œë¥¼ ë³€ê²½í•˜ì˜€ìœ¼ë‹ˆ, ë‹¤ì‹œ ì‹¤í–‰í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

![./doc6_assets/Kapture_2021-03-22_at_17.23.06.gif](./doc6_assets/Kapture_2021-03-22_at_17.23.06.gif)

![./doc6_assets/Screen_Shot_2021-03-23_at_1.35.04_AM.png](./doc6_assets/Screen_Shot_2021-03-23_at_1.35.04_AM.png)

ì •ìƒì ìœ¼ë¡œ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤!! ğŸ‘ğŸ‘ğŸ‘ğŸ‘

ë¿ë§Œ ì•„ë‹ˆë¼ ë” ì´ìƒ ì—ëŸ¬ë„ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!!

## ì „ì²´ ì½”ë“œ ì‚´í´ë³´ê¸°

- ê¹ƒí—ˆë¸Œì—ì„œ ì „ì²´ ì½”ë“œ ë³´ê¸° ->Â [ë°”ë¡œê°€ê¸°](https://github.com/CodePotStudio/starter-quiz-app/tree/week05-05)

## Somthing More!!!

ë°˜ë“œì‹œ ê³µë¶€í•´ì•¼ í•˜ëŠ” ê±´ ì•„ë‹ˆì§€ë§Œ, ë„ì›€ì´ ë  ë§Œí•œ ìë£Œë“¤ì„ ê³µìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

- clean upì„ í•„ìš”ë¡œ í•˜ëŠ” side Effect ([ë§í¬](https://ko.reactjs.org/docs/hooks-effect.html#effects-with-cleanup))
- javascriptì—ì„œ timer ì‚¬ìš©í•˜ê¸° ([ë§í¬](https://ko.javascript.info/settimeout-setinterval))
